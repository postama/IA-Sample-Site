---
/* ProblemStatement.astro */
---

<section 
  id="problem-trigger" 
  class="group relative w-full py-24 px-4 bg-ink text-white font-sans overflow-hidden"
>
    <div 
      class="absolute inset-0 z-10 opacity-[0.07] pointer-events-none invert mix-blend-overlay"
      style="background-image: url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI1MDAiIGhlaWdodD0iNTAwIj48ZmlsdGVyIGlkPSJub2lzZSI+PGZlVHVyYnVsZW5jZSB0eXBlPSJmcmFjdGFsTm9pc2UiIGJhc2VGcmVxdWVuY3k9IjAuNjUiIG51bT1vY3RhdmVzPSIzIiBzdGl0Y2hUaWxlcz0ic3RpdGNoIi8+PC9maWx0ZXI+PHJlY3Qgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgZmlsdGVyPSJ1cmwoI25vaXNlKSIgb3BhY2l0eT0iMSIvPjwvc3ZnPg==');"
    ></div>

    <div class="max-w-7xl mx-auto relative z-20 border border-manila bg-ink">
      
      <div class="relative border-b border-manila opacity-0 translate-y-8 transition-all duration-700 ease-out group-[.visible]:opacity-100 group-[.visible]:translate-y-0 delay-0">
        
        <div class="h-3 w-full border-b border-manila opacity-80 hazard-strip"></div>
        
        <div class="p-8 md:p-12">
          <div class="flex justify-between mb-6 border-b border-dashed border-manila pb-2 opacity-80">
              <span class="font-mono text-xs uppercase tracking-widest text-manila">ERR_LOG: REVENUE_LEAKAGE</span>
              <span class="font-mono text-xs uppercase tracking-widest text-manila">PRIORITY: CRITICAL</span>
          </div>
          <h2 class="text-3xl md:text-5xl font-black uppercase leading-none tracking-tight text-manila">
            Supply chain exceptions cost brands <span class="bg-manila text-ink px-1">13-28%</span> of annual revenue.
          </h2>
        </div>
      </div>
  
      <div class="grid grid-cols-1 md:grid-cols-3 opacity-0 translate-y-8 transition-all duration-700 ease-out group-[.visible]:opacity-100 group-[.visible]:translate-y-0 delay-150">
      
        <div class="flex flex-col justify-between p-8 min-h-[200px] border-b md:border-b-0 md:border-r border-manila last:border-0">
          <div class="flex justify-between items-start mb-4">
            <span class="font-mono text-xs uppercase tracking-widest text-manila">REF: TRD-01</span>
            <svg class="w-6 h-6 stroke-manila stroke-2 fill-none overflow-visible" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
              <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path>
              <line x1="12" y1="9" x2="12" y2="13"></line>
              <line x1="12" y1="17" x2="12.01" y2="17"></line>
            </svg>
          </div>
          <div>
            <h3 class="text-2xl font-bold uppercase mb-4 leading-tight text-manila">Trade & Geopolitical Volatility</h3>
            <p class="text-base leading-relaxed text-white/80">Constant tariff changes and overnight policy shifts render forecasts obsolete.</p>
          </div>
        </div>
  
        <div class="flex flex-col justify-between p-8 min-h-[200px] border-b md:border-b-0 md:border-r border-manila last:border-0">
          <div class="flex justify-between items-start mb-4">
            <span class="font-mono text-xs uppercase tracking-widest text-manila">REF: OPS-02</span>
            <svg class="w-6 h-6 stroke-manila stroke-2 fill-none overflow-visible" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
              <polygon points="7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2"></polygon>
              <line x1="12" y1="8" x2="12" y2="12"></line>
              <line x1="12" y1="16" x2="12.01" y2="16"></line>
            </svg>
          </div>
          <div>
            <h3 class="text-2xl font-bold uppercase mb-4 leading-tight text-manila">Operational Disruptions</h3>
            <p class="text-base leading-relaxed text-white/80">Delays, ETA slips, inventory shortages, and forced supplier substitutions.</p>
          </div>
        </div>
  
        <div class="flex flex-col justify-between p-8 min-h-[200px] border-b md:border-b-0 md:border-r border-manila last:border-0">
          <div class="flex justify-between items-start mb-4">
            <span class="font-mono text-xs uppercase tracking-widest text-manila">REF: DSG-03</span>
            <svg class="w-6 h-6 stroke-manila stroke-2 fill-none overflow-visible" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round">
              <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path>
              <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
              <line x1="12" y1="22.08" x2="12" y2="12"></line>
            </svg>
          </div>
          <div>
            <h3 class="text-2xl font-bold uppercase mb-4 leading-tight text-manila">Design & Part Changes</h3>
            <p class="text-base leading-relaxed text-white/80">Component changes ripple through inventory and orders, breaking the chain.</p>
          </div>
        </div>
  
      </div>
  
      <div class="grid grid-cols-1 md:grid-cols-[200px_1fr_200px] border-t border-manila bg-manila/[0.05] opacity-0 translate-y-8 transition-all duration-700 ease-out group-[.visible]:opacity-100 group-[.visible]:translate-y-0 delay-300">
        
        <div class="p-8 flex items-center justify-start md:justify-center border-b md:border-b-0 md:border-r border-manila">
          <span class="font-mono text-xs uppercase tracking-widest text-manila">SYSTEM DIAGNOSIS:</span>
        </div>
        
        <div class="p-8">
          <h3 class="text-xl font-black uppercase mb-2 text-manila">CONSTANT CHAOS</h3>
          <p class="font-mono text-sm text-white/80">Changes are logged, but not prioritized. Teams scramble offline to assess impact.</p>
        </div>
        
        <div class="p-8 flex items-center justify-start md:justify-center border-t md:border-t-0 md:border-l border-manila">
          <span class="font-mono text-xs uppercase tracking-widest bg-manila text-ink px-2 py-1 font-bold animate-pulse">ATTN REQUIRED</span>
        </div>
      </div>
  
    </div>
</section>
  
<style>
  /* Repeating linear gradients with hard stops are difficult to do cleanly 
    with standard Tailwind classes, so standard CSS is preferred here.
    We reference the same CSS global variables.
  */
  .hazard-strip {
    background: repeating-linear-gradient(
      45deg,
      var(--accent-manila),
      var(--accent-manila) 10px,
      var(--ink-black) 10px,
      var(--ink-black) 20px
    );
  }
</style>
  
<script>
  function initProblemObserver() {
    const section = document.getElementById('problem-trigger');
    
    if (!section) return;

    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          // Add class 'visible' to the parent section, which triggers Tailwind group modifiers
          section.classList.add('visible');
          observer.unobserve(section);
        }
      });
    }, {
      threshold: 0.2
    });

    observer.observe(section);
  }

  // Support both initial load and Astro View Transitions
  initProblemObserver();
  document.addEventListener('astro:page-load', initProblemObserver);
</script>